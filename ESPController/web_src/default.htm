<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet" />
  <link href="https://catalinplesu.github.io/DiyBms_Nimh/WebInterface/style.css" rel="stylesheet" />
  <script type='text/javascript' src='https://catalinplesu.github.io/DiyBms_Nimh/WebInterface/jquery.js' crossorigin='anonymous'></script>

  <script type="text/javascript">
      const MAXIMUM_NUMBER_OF_BANKS = 16;
      const MAXIMUM_NUMBER_OF_MODULES_PER_DATA_PACKET = 16;

      var DEFAULT_GRAPH_MAX_VOLTAGE = parseFloat('%graph_voltagehigh%');
      var DEFAULT_GRAPH_MIN_VOLTAGE = parseFloat('%graph_voltagelow%');
      var XSS_KEY = '%XSS_KEY%';

      var g1 = null;
      var g2 = null;
      var g3 = null;

      $(document).ready(function() {
      $.getScript("https://catalinplesu.github.io/DiyBms_Nimh/WebInterface/echarts.min.js");
      $.getScript("https://catalinplesu.github.io/DiyBms_Nimh/WebInterface/echarts_gl.min.js");
      $.getScript("https://catalinplesu.github.io/DiyBms_Nimh/WebInterface/pagecode.js");
      });

      function loadPage() {
        fetch("https://catalinplesu.github.io/DiyBms_Nimh/WebInterface/default.htm")
          .then(response => response.text())
          .then(html => {
            const parser = new DOMParser();
            const newDocument = parser.parseFromString(html, 'text/html');
            const newBody = newDocument.querySelector('body');
            const currentBody = document.querySelector('body');
            currentBody.innerHTML = newBody.innerHTML;
          });

        function setGraphSize() {
        var containerWidth = $('#graphs').width();
        var containerHeight = $('#graphs').height();
        var graphWidth = containerWidth / 2; // Divide container width into two equal parts
        var graphHeight = containerHeight;

        $('#graph1').width(graphWidth).height(graphHeight);
        $('#graph2').width(graphWidth).height(graphHeight);
      }
      // Initial setup
      setGraphSize();

      // Resize event handler
      $(window).resize(function() {
        setGraphSize();
      });
    }
  </script>
  
  <title>DIY BMS CONTROLLER v4</title>
</head>

<body onload="loadPage()">
</body>

</html>
